(() => {

  //moment.locale('fi');

  function formatDuration(ms) {
    const secs = ms / 1000;
    if (secs < 60) {
      return `${Math.round(secs)} s`;
    }
    const minutes = secs / 60;
    if (minutes < 120) {
      return `${Math.round(minutes)} min`;
    }
    const hours = minutes / 60;
    if (hours < 24) {
      return `${Math.round(hours * 10) / 10} h`.replace('.', ',');
    }
    const days = hours / 24;
    return `${Math.round(days * 10) / 10} days`.replace('.', ',');
  }

  function drawRetweetDurationChart() {
    //const quotedRts = [[0,4000],[1,73000],[2,109000],[3,144000],[4,180000],[5,217000],[6,257000],[7,300000],[8,347000],[9,397000],[10,453000],[11,512000],[12,580000],[13,652000],[14,731000],[15,816000],[16,906000],[17,1010000],[18,1121000],[19,1242000],[20,1377000],[21,1521000],[22,1678000],[23,1851000],[24,2034000],[25,2233000],[26,2439000],[27,2665000],[28,2900000],[29,3157000],[30,3431000],[31,3719000],[32,4024000],[33,4345000],[34,4699000],[35,5067000],[36,5445000],[37,5859000],[38,6302000],[39,6756000],[40,7236000],[41,7762000],[42,8312000],[43,8896000],[44,9516000],[45,10184000],[46,10878000],[47,11635000],[48,12459000],[49,13318000],[50,14242000],[51,15204000],[52,16271000],[53,17443000],[54,18676000],[55,19951000],[56,21383000],[57,22888000],[58,24475000],[59,26204000],[60,28041000],[61,29933000],[62,31957000],[63,34054000],[64,36320000],[65,38635000],[66,41069000],[67,43661000],[68,46490000],[69,49382000],[70,52527000],[71,55699000],[72,59010000],[73,62350000],[74,65612000],[75,68825000],[76,71781000],[77,74797000],[78,77866000],[79,80805000],[80,83712000],[81,86569000],[82,89893000],[83,94072000],[84,99030000],[85,105757000],[86,114446000],[87,125763000],[88,139044000],[89,155460000],[90,170058000],[91,188572000],[92,228699000],[93,268828000],[94,343815000],[95,447374000],[96,638645000],[97,1104149000],[98,2522653000],[99,11779931000],[100,369568838000]];
    //const normalRts = [[0,0],[1,27000],[2,43000],[3,61000],[4,81000],[5,105000],[6,131000],[7,161000],[8,194000],[9,231000],[10,273000],[11,319000],[12,370000],[13,426000],[14,488000],[15,557000],[16,633000],[17,716000],[18,807000],[19,907000],[20,1015000],[21,1133000],[22,1264000],[23,1405000],[24,1555000],[25,1716000],[26,1891000],[27,2080000],[28,2278000],[29,2491000],[30,2717000],[31,2960000],[32,3219000],[33,3486000],[34,3774000],[35,4082000],[36,4405000],[37,4745000],[38,5099000],[39,5479000],[40,5877000],[41,6298000],[42,6744000],[43,7209000],[44,7707000],[45,8230000],[46,8788000],[47,9377000],[48,9999000],[49,10662000],[50,11376000],[51,12144000],[52,12944000],[53,13792000],[54,14699000],[55,15674000],[56,16704000],[57,17806000],[58,18986000],[59,20251000],[60,21579000],[61,23026000],[62,24532000],[63,26140000],[64,27809000],[65,29572000],[66,31396000],[67,33314000],[68,35302000],[69,37381000],[70,39601000],[71,41924000],[72,44419000],[73,47046000],[74,49887000],[75,53016000],[76,56330000],[77,59755000],[78,63180000],[79,66567000],[80,69837000],[81,73112000],[82,76394000],[83,79673000],[84,82855000],[85,86134000],[86,90297000],[87,95800000],[88,103012000],[89,112847000],[90,125923000],[91,144082000],[92,163619000],[93,188739000],[94,248222000],[95,337024000],[96,517867000],[97,1112065000],[98,4865251000],[99,36765439000],[100,338289712000]];
    const retweets = [[0, 0], [1, 30000], [2, 49000], [3, 69000], [4, 93000], [5, 119000], [6, 148000], [7, 181000], [8, 216000], [9, 256000], [10, 300000], [11, 349000], [12, 402000], [13, 461000], [14, 526000], [15, 598000], [16, 677000], [17, 764000], [18, 857000], [19, 960000], [20, 1072000], [21, 1195000], [22, 1329000], [23, 1474000], [24, 1628000], [25, 1796000], [26, 1978000], [27, 2170000], [28, 2375000], [29, 2594000], [30, 2827000], [31, 3080000], [32, 3344000], [33, 3619000], [34, 3918000], [35, 4233000], [36, 4566000], [37, 4917000], [38, 5283000], [39, 5674000], [40, 6084000], [41, 6519000], [42, 6979000], [43, 7464000], [44, 7979000], [45, 8524000], [46, 9101000], [47, 9714000], [48, 10362000], [49, 11053000], [50, 11807000], [51, 12601000], [52, 13435000], [53, 14322000], [54, 15277000], [55, 16290000], [56, 17380000], [57, 18533000], [58, 19775000], [59, 21106000], [60, 22526000], [61, 24014000], [62, 25611000], [63, 27282000], [64, 29037000], [65, 30865000], [66, 32784000], [67, 34777000], [68, 36888000], [69, 39090000], [70, 41416000], [71, 43879000], [72, 46526000], [73, 49356000], [74, 52430000], [75, 55699000], [76, 59102000], [77, 62498000], [78, 65867000], [79, 69141000], [80, 72378000], [81, 75584000], [82, 78839000], [83, 81985000], [84, 85165000], [85, 88774000], [86, 93600000], [87, 99729000], [88, 108029000], [89, 119146000], [90, 133896000], [91, 152844000], [92, 171043000], [93, 202485000], [94, 261111000], [95, 354750000], [96, 540742000], [97, 1110264000], [98, 4185670000], [99, 31529303000], [100, 369568838000]];
    const percentiles = [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 95];

    const pickPercentiles = (data) => _.map(percentiles, p => data[p][1]);

    $('<div/>').appendTo($('#playground-dna')).highcharts({
      chart: {
        type: 'column'
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      title: {
        text: null
      },
      xAxis: {
        categories: _.map(percentiles, p => `${p}%`),
        title: {
          text: 'Percentile',
          //enabled: false
        }
      },
      yAxis: {
        type: 'logarithmic',
        title: {
          text: 'Time since original tweet'
        },
        labels: {
          style: {
            fontSize: '14px',
            fontWeight: '400',
          },
          formatter() {
            return formatDuration(this.value);
          }
        }
      },
      tooltip: {
        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.percentage:.1f}%</b> ({point.y:,.0f} millions)<br/>',
        split: true
      },
      plotOptions: {
        series: {
          dataLabels: {
            style: {
              fontSize: '14px',
              fontWeight: '400',
            },
            enabled: true,
            formatter() {
              return formatDuration(this.y);
            }
          }
        }
      },
      series: [
        {
          name: 'Retweets',
          data: pickPercentiles(retweets)
        }
      ]
    });
  }

  function drawDateTimeSeries(data, fieldName) {
    console.log(data)
    const foo = $('<div/>').appendTo($('#playground')).highcharts({
      chart: {
        zoomType: 'x'
      },
      title: { text: null },
      subtitle: { text: null },
      xAxis: {
        type: 'datetime',
        /*
        labels: {
          formatter: function () {
            const m = moment(this.value);
            return m.format('dd HH:mm');
          }
        }
        */
      },
      yAxis: {
        title: {
          text: fieldName
        }
      },
      legend: {
        enabled: false
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      series: [{
        type: 'areaspline',
        name: fieldName,
        data: data
      }]
    });

    console.log(foo)
  }

  function drawBotChart() {
    const elastic = { "took": 78, "timed_out": false, "_shards": { "total": 1, "successful": 1, "failed": 0 }, "hits": { "total": 68778, "max_score": 0.0, "hits": [] }, "aggregations": { "user_cardinality": { "value": 19885 }, "tweet_time": { "buckets": [{ "key_as_string": "2018-01-17T00:00:00.000Z", "key": 1516147200000, "doc_count": 4871 }, { "key_as_string": "2018-01-18T00:00:00.000Z", "key": 1516233600000, "doc_count": 3466 }, { "key_as_string": "2018-01-19T00:00:00.000Z", "key": 1516320000000, "doc_count": 2360 }, { "key_as_string": "2018-01-20T00:00:00.000Z", "key": 1516406400000, "doc_count": 3530 }, { "key_as_string": "2018-01-21T00:00:00.000Z", "key": 1516492800000, "doc_count": 5200 }, { "key_as_string": "2018-01-22T00:00:00.000Z", "key": 1516579200000, "doc_count": 4286 }, { "key_as_string": "2018-01-23T00:00:00.000Z", "key": 1516665600000, "doc_count": 3678 }, { "key_as_string": "2018-01-24T00:00:00.000Z", "key": 1516752000000, "doc_count": 2124 }, { "key_as_string": "2018-01-25T00:00:00.000Z", "key": 1516838400000, "doc_count": 6697 }, { "key_as_string": "2018-01-26T00:00:00.000Z", "key": 1516924800000, "doc_count": 3725 }, { "key_as_string": "2018-01-27T00:00:00.000Z", "key": 1517011200000, "doc_count": 4029 }, { "key_as_string": "2018-01-28T00:00:00.000Z", "key": 1517097600000, "doc_count": 17179 }, { "key_as_string": "2018-01-29T00:00:00.000Z", "key": 1517184000000, "doc_count": 5314 }, { "key_as_string": "2018-01-30T00:00:00.000Z", "key": 1517270400000, "doc_count": 2319 }] } } };
    const { buckets } = elastic.aggregations.tweet_time;

    const data = _.map(buckets, ({ key_as_string, doc_count }) => {
      const [year, month, day] = _.map(key_as_string.substr(0, 10).split('-'), str => parseInt(str, 10));
      return [Date.UTC(year, month - 1, day), doc_count];
    });

    $('<div/>').appendTo($('#playground-dna')).highcharts({
      chart: {
        zoomType: 'x'
      },
      title: {
        //text: 'USD to EUR exchange rate over time'
        text: null
      },
      subtitle: {
        text: null
      },
      xAxis: {
        type: 'datetime',
        labels: {
          formatter: function () {
            const m = moment(this.value);
            console.log(m.date());
            if (m.date() === 1) {
              return m.format('MMMM');
            } else {
              return m.format('dd D.M.');
            }
          }
        }
      },
      yAxis: {
        title: {
          text: 'Twiittejä'
        }
      },
      legend: {
        enabled: false
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      plotOptions: {
        area: {
          fillColor: {
            linearGradient: {
              x1: 0,
              y1: 0,
              x2: 0,
              y2: 1
            },
            stops: [
              [0, '#008833'],
              [1, Highcharts.Color('#008833').setOpacity(0.3).get('rgba')]
            ]
          },
          marker: {
            radius: 0
          },
          lineWidth: 1,
          states: {
            hover: {
              lineWidth: 1
            }
          },
        }
      },
      tooltip: {
        shared: true,
        crosshairs: true,

        // These are essential where useHTML and custom tooltip
        // Issue was: http://stackoverflow.com/questions/13740200/highcharts-html-tooltip-datalabels-render-issue
        //borderWidth: 0,
        //borderRadius: 0,
        shadow: false,
        //backgroundColor: "rgba(255,255,255,0)",
        useHTML: true,

        positioner: function (boxWidth, boxHeight, point) {
          return {
            x: point.plotX - 90,
            y: point.plotY
          };
        },

        formatter: function () {
          const day = moment(this.x).format('LL');
          return (`
            <div class="pyppe-highcharts-tooltip" style="padding: 0px;">
              <h6>${day}</h6>
              <div>Twiittejä: <b>${this.y}</b></div>
            </div>
          `);
        }
      },
      series: [{
        type: 'areaspline',
        name: 'Twiittejä',
        data: data
      }]
    });
  }

  //drawBotChart();

  const rawApiUsage = [[1552867200000,0],[1552867500000,1],[1552867800000,4],[1552868100000,0],[1552868400000,0],[1552868700000,10],[1552869000000,2],[1552869300000,52],[1552869600000,14],[1552869900000,7],[1552870200000,9],[1552870500000,6],[1552870800000,1],[1552871100000,2],[1552871400000,3],[1552871700000,11],[1552872000000,21],[1552872300000,58],[1552872600000,19],[1552872900000,3],[1552873200000,9],[1552873500000,4],[1552873800000,12],[1552874100000,62],[1552874400000,107],[1552874700000,37],[1552875000000,92],[1552875300000,347],[1552875600000,25],[1552875900000,32],[1552876200000,34],[1552876500000,25],[1552876800000,11],[1552877100000,53],[1552877400000,22],[1552877700000,3],[1552878000000,30],[1552878300000,5],[1552878600000,15],[1552878900000,16],[1552879200000,30],[1552879500000,12],[1552879800000,20],[1552880100000,10],[1552880400000,23],[1552880700000,39],[1552881000000,32],[1552881300000,8],[1552881600000,22],[1552881900000,21],[1552882200000,53],[1552882500000,82],[1552882800000,11],[1552883100000,16],[1552883400000,76],[1552883700000,23],[1552884000000,36],[1552884300000,12],[1552884600000,12],[1552884900000,3],[1552885200000,4],[1552885500000,7],[1552885800000,0],[1552886100000,3],[1552886400000,60],[1552886700000,126],[1552887000000,81],[1552887300000,189],[1552887600000,38],[1552887900000,195],[1552888200000,0],[1552888500000,1],[1552888800000,0],[1552889100000,36],[1552889400000,6],[1552889700000,5],[1552890000000,3],[1552890300000,11],[1552890600000,5],[1552890900000,15],[1552891200000,13],[1552891500000,17],[1552891800000,7],[1552892100000,13],[1552892400000,19],[1552892700000,12],[1552893000000,2],[1552893300000,9],[1552893600000,47],[1552893900000,51],[1552894200000,15],[1552894500000,56],[1552894800000,15],[1552895100000,19],[1552895400000,6],[1552895700000,9],[1552896000000,12],[1552896300000,11],[1552896600000,39],[1552896900000,48],[1552897200000,183],[1552897500000,46],[1552897800000,48],[1552898100000,119],[1552898400000,38],[1552898700000,54],[1552899000000,71],[1552899300000,30],[1552899600000,20],[1552899900000,45],[1552900200000,43],[1552900500000,48],[1552900800000,36],[1552901100000,49],[1552901400000,41],[1552901700000,57],[1552902000000,30],[1552902300000,133],[1552902600000,49],[1552902900000,63],[1552903200000,34],[1552903500000,58],[1552903800000,32],[1552904100000,17],[1552904400000,55],[1552904700000,36],[1552905000000,37],[1552905300000,44],[1552905600000,56],[1552905900000,38],[1552906200000,29],[1552906500000,1],[1552906800000,19],[1552907100000,25],[1552907400000,37],[1552907700000,28],[1552908000000,63],[1552908300000,60],[1552908600000,19],[1552908900000,86],[1552909200000,43],[1552909500000,30],[1552909800000,23],[1552910100000,66],[1552910400000,26],[1552910700000,31],[1552911000000,40],[1552911300000,40],[1552911600000,51],[1552911900000,35],[1552912200000,42],[1552912500000,5],[1552912800000,37],[1552913100000,52],[1552913400000,34],[1552913700000,44],[1552914000000,31],[1552914300000,51],[1552914600000,80],[1552914900000,31],[1552915200000,20],[1552915500000,37],[1552915800000,52],[1552916100000,28],[1552916400000,42],[1552916700000,64],[1552917000000,51],[1552917300000,128],[1552917600000,141],[1552917900000,33],[1552918200000,17],[1552918500000,107],[1552918800000,66],[1552919100000,33],[1552919400000,41],[1552919700000,46],[1552920000000,49],[1552920300000,72],[1552920600000,83],[1552920900000,36],[1552921200000,216],[1552921500000,173],[1552921800000,361],[1552922100000,368],[1552922400000,147],[1552922700000,116],[1552923000000,80],[1552923300000,20],[1552923600000,42],[1552923900000,96],[1552924200000,114],[1552924500000,85],[1552924800000,104],[1552925100000,32],[1552925400000,51],[1552925700000,50],[1552926000000,71],[1552926300000,83],[1552926600000,117],[1552926900000,74],[1552927200000,13],[1552927500000,23],[1552927800000,39],[1552928100000,60],[1552928400000,120],[1552928700000,74],[1552929000000,38],[1552929300000,63],[1552929600000,36],[1552929900000,63],[1552930200000,26],[1552930500000,113],[1552930800000,54],[1552931100000,94],[1552931400000,66],[1552931700000,64],[1552932000000,27],[1552932300000,40],[1552932600000,42],[1552932900000,9],[1552933200000,7],[1552933500000,20],[1552933800000,85],[1552934100000,118],[1552934400000,23],[1552934700000,27],[1552935000000,90],[1552935300000,72],[1552935600000,96],[1552935900000,60],[1552936200000,110],[1552936500000,70],[1552936800000,71],[1552937100000,17],[1552937400000,21],[1552937700000,60],[1552938000000,32],[1552938300000,17],[1552938600000,12],[1552938900000,15],[1552939200000,22],[1552939500000,25],[1552939800000,65],[1552940100000,117],[1552940400000,108],[1552940700000,37],[1552941000000,17],[1552941300000,14],[1552941600000,12],[1552941900000,27],[1552942200000,5],[1552942500000,13],[1552942800000,8],[1552943100000,19],[1552943400000,6],[1552943700000,87],[1552944000000,43],[1552944300000,22],[1552944600000,15],[1552944900000,4],[1552945200000,19],[1552945500000,131],[1552945800000,75],[1552946100000,19],[1552946400000,28],[1552946700000,15],[1552947000000,39],[1552947300000,24],[1552947600000,27],[1552947900000,5],[1552948200000,5],[1552948500000,2],[1552948800000,5],[1552949100000,12],[1552949400000,18],[1552949700000,2],[1552950000000,2],[1552950300000,6],[1552950600000,0],[1552950900000,11],[1552951200000,26],[1552951500000,0],[1552951800000,23],[1552952100000,20],[1552952400000,0],[1552952700000,32],[1552953000000,0],[1552953300000,10],[1552953600000,23],[1552953900000,3],[1552954200000,7],[1552954500000,0],[1552954800000,7],[1552955100000,0],[1552955400000,4],[1552955700000,0],[1552956000000,0],[1552956300000,0],[1552956600000,6],[1552956900000,54],[1552957200000,35],[1552957500000,13],[1552957800000,44],[1552958100000,22],[1552958400000,13],[1552958700000,22],[1552959000000,19],[1552959300000,11],[1552959600000,11],[1552959900000,14],[1552960200000,15],[1552960500000,25],[1552960800000,30],[1552961100000,30],[1552961400000,14],[1552961700000,8],[1552962000000,2],[1552962300000,8],[1552962600000,11],[1552962900000,11],[1552963200000,9],[1552963500000,5],[1552963800000,12],[1552964100000,5],[1552964400000,7],[1552964700000,15],[1552965000000,2],[1552965300000,16],[1552965600000,34],[1552965900000,46],[1552966200000,38],[1552966500000,177],[1552966800000,50],[1552967100000,11],[1552967400000,10],[1552967700000,10],[1552968000000,20],[1552968300000,19],[1552968600000,20],[1552968900000,61],[1552969200000,54],[1552969500000,1],[1552969800000,5],[1552970100000,8],[1552970400000,1],[1552970700000,0],[1552971000000,7],[1552971300000,1],[1552971600000,7],[1552971900000,4],[1552972200000,0],[1552972500000,7],[1552972800000,4],[1552973100000,0],[1552973400000,35],[1552973700000,12],[1552974000000,9],[1552974300000,17],[1552974600000,2],[1552974900000,8],[1552975200000,10],[1552975500000,24],[1552975800000,37],[1552976100000,8],[1552976400000,23],[1552976700000,13],[1552977000000,2],[1552977300000,0],[1552977600000,14],[1552977900000,3],[1552978200000,4],[1552978500000,2],[1552978800000,23],[1552979100000,1],[1552979400000,3],[1552979700000,0],[1552980000000,0],[1552980300000,18],[1552980600000,14],[1552980900000,5],[1552981200000,32],[1552981500000,11],[1552981800000,10],[1552982100000,2],[1552982400000,1],[1552982700000,11],[1552983000000,7],[1552983300000,15],[1552983600000,32],[1552983900000,14],[1552984200000,9],[1552984500000,19],[1552984800000,16],[1552985100000,42],[1552985400000,9],[1552985700000,20],[1552986000000,29],[1552986300000,24],[1552986600000,35],[1552986900000,21],[1552987200000,34],[1552987500000,50],[1552987800000,18],[1552988100000,18],[1552988400000,28],[1552988700000,43],[1552989000000,48],[1552989300000,15],[1552989600000,39],[1552989900000,43],[1552990200000,47],[1552990500000,54],[1552990800000,36],[1552991100000,67],[1552991400000,35],[1552991700000,16],[1552992000000,39],[1552992300000,32],[1552992600000,21],[1552992900000,37],[1552993200000,35],[1552993500000,33],[1552993800000,28],[1552994100000,23],[1552994400000,24],[1552994700000,22],[1552995000000,9],[1552995300000,44],[1552995600000,44],[1552995900000,65],[1552996200000,40],[1552996500000,46],[1552996800000,60],[1552997100000,41],[1552997400000,27],[1552997700000,18],[1552998000000,36],[1552998300000,42],[1552998600000,24],[1552998900000,40],[1552999200000,28],[1552999500000,58],[1552999800000,38],[1553000100000,29],[1553000400000,33],[1553000700000,22],[1553001000000,16],[1553001300000,4],[1553001600000,76],[1553001900000,43],[1553002200000,30],[1553002500000,108],[1553002800000,94],[1553003100000,47],[1553003400000,104],[1553003700000,67],[1553004000000,49],[1553004300000,28],[1553004600000,77],[1553004900000,105],[1553005200000,67],[1553005500000,73],[1553005800000,28],[1553006100000,43],[1553006400000,70],[1553006700000,68],[1553007000000,25],[1553007300000,38],[1553007600000,46],[1553007900000,28],[1553008200000,79],[1553008500000,32],[1553008800000,34],[1553009100000,82],[1553009400000,51],[1553009700000,88],[1553010000000,51],[1553010300000,72],[1553010600000,27],[1553010900000,46],[1553011200000,34],[1553011500000,42],[1553011800000,41],[1553012100000,28],[1553012400000,95],[1553012700000,54],[1553013000000,44],[1553013300000,73],[1553013600000,92],[1553013900000,107],[1553014200000,58],[1553014500000,69],[1553014800000,37],[1553015100000,36],[1553015400000,54],[1553015700000,26],[1553016000000,62],[1553016300000,81],[1553016600000,52],[1553016900000,37],[1553017200000,37],[1553017500000,65],[1553017800000,22],[1553018100000,12],[1553018400000,0],[1553018700000,19],[1553019000000,7],[1553019300000,6],[1553019600000,33],[1553019900000,8],[1553020200000,11],[1553020500000,28],[1553020800000,13],[1553021100000,4],[1553021400000,7],[1553021700000,17],[1553022000000,21],[1553022300000,16],[1553022600000,11],[1553022900000,18],[1553023200000,29],[1553023500000,15],[1553023800000,28],[1553024100000,17],[1553024400000,34],[1553024700000,37],[1553025000000,23],[1553025300000,22],[1553025600000,5],[1553025900000,6],[1553026200000,13],[1553026500000,12],[1553026800000,14],[1553027100000,38],[1553027400000,36],[1553027700000,16],[1553028000000,6],[1553028300000,23],[1553028600000,20],[1553028900000,30],[1553029200000,10],[1553029500000,29],[1553029800000,37],[1553030100000,22],[1553030400000,36],[1553030700000,5],[1553031000000,30],[1553031300000,21],[1553031600000,23],[1553031900000,5],[1553032200000,41],[1553032500000,50],[1553032800000,14],[1553033100000,6],[1553033400000,0],[1553033700000,3],[1553034000000,12],[1553034300000,4],[1553034600000,12],[1553034900000,5],[1553035200000,12],[1553035500000,4],[1553035800000,1],[1553036100000,16],[1553036400000,27],[1553036700000,6],[1553037000000,11],[1553037300000,2],[1553037600000,6],[1553037900000,7],[1553038200000,6],[1553038500000,17],[1553038800000,2],[1553039100000,3],[1553039400000,0],[1553039700000,24],[1553040000000,50],[1553040300000,12],[1553040600000,0],[1553040900000,6],[1553041200000,10],[1553041500000,47],[1553041800000,17],[1553042100000,0],[1553042400000,0],[1553042700000,0],[1553043000000,1],[1553043300000,4],[1553043600000,13],[1553043900000,9],[1553044200000,5],[1553044500000,5],[1553044800000,0],[1553045100000,4],[1553045400000,8],[1553045700000,2],[1553046000000,8],[1553046300000,1],[1553046600000,10],[1553046900000,2],[1553047200000,2],[1553047500000,8],[1553047800000,33],[1553048100000,20],[1553048400000,3],[1553048700000,7],[1553049000000,1],[1553049300000,2],[1553049600000,1],[1553049900000,11],[1553050200000,7],[1553050500000,17],[1553050800000,30],[1553051100000,16],[1553051400000,23],[1553051700000,23],[1553052000000,5],[1553052300000,2],[1553052600000,56],[1553052900000,6],[1553053200000,0],[1553053500000,0],[1553053800000,1],[1553054100000,10],[1553054400000,11],[1553054700000,9],[1553055000000,10],[1553055300000,9],[1553055600000,15],[1553055900000,15],[1553056200000,3],[1553056500000,11],[1553056800000,14],[1553057100000,14],[1553057400000,5],[1553057700000,5],[1553058000000,9],[1553058300000,9],[1553058600000,4],[1553058900000,6],[1553059200000,9],[1553059500000,6],[1553059800000,16],[1553060100000,4],[1553060400000,3],[1553060700000,14],[1553061000000,5],[1553061300000,5],[1553061600000,6],[1553061900000,2],[1553062200000,10],[1553062500000,3],[1553062800000,5],[1553063100000,3],[1553063400000,15],[1553063700000,9],[1553064000000,10],[1553064300000,7],[1553064600000,12],[1553064900000,11],[1553065200000,24],[1553065500000,15],[1553065800000,1],[1553066100000,15],[1553066400000,14],[1553066700000,24],[1553067000000,22],[1553067300000,48],[1553067600000,16],[1553067900000,11],[1553068200000,17],[1553068500000,13],[1553068800000,37],[1553069100000,33],[1553069400000,22],[1553069700000,26],[1553070000000,15],[1553070300000,32],[1553070600000,38],[1553070900000,20],[1553071200000,16],[1553071500000,23],[1553071800000,15],[1553072100000,15],[1553072400000,28],[1553072700000,22],[1553073000000,58],[1553073300000,71],[1553073600000,34],[1553073900000,49],[1553074200000,56],[1553074500000,58],[1553074800000,38],[1553075100000,42],[1553075400000,64],[1553075700000,157],[1553076000000,236],[1553076300000,57],[1553076600000,111],[1553076900000,241],[1553077200000,200],[1553077500000,206],[1553077800000,97],[1553078100000,74],[1553078400000,153],[1553078700000,85],[1553079000000,70],[1553079300000,53],[1553079600000,28],[1553079900000,19],[1553080200000,23],[1553080500000,28],[1553080800000,68],[1553081100000,22],[1553081400000,38],[1553081700000,30],[1553082000000,30],[1553082300000,12],[1553082600000,28],[1553082900000,16],[1553083200000,6],[1553083500000,6],[1553083800000,72],[1553084100000,60],[1553084400000,47],[1553084700000,107],[1553085000000,49],[1553085300000,70],[1553085600000,25],[1553085900000,25],[1553086200000,45],[1553086500000,32],[1553086800000,26],[1553087100000,60],[1553087400000,67],[1553087700000,53],[1553088000000,73],[1553088300000,48],[1553088600000,60],[1553088900000,56],[1553089200000,49],[1553089500000,70],[1553089800000,56],[1553090100000,49],[1553090400000,62],[1553090700000,47],[1553091000000,41],[1553091300000,27],[1553091600000,26],[1553091900000,44],[1553092200000,20],[1553092500000,62],[1553092800000,32],[1553093100000,90],[1553093400000,145],[1553093700000,51],[1553094000000,21],[1553094300000,23],[1553094600000,87],[1553094900000,85],[1553095200000,86],[1553095500000,39],[1553095800000,56],[1553096100000,57],[1553096400000,54],[1553096700000,40],[1553097000000,41],[1553097300000,85],[1553097600000,28],[1553097900000,55],[1553098200000,32],[1553098500000,52],[1553098800000,50],[1553099100000,68],[1553099400000,58],[1553099700000,71],[1553100000000,54],[1553100300000,100],[1553100600000,80],[1553100900000,85],[1553101200000,28],[1553101500000,84],[1553101800000,62],[1553102100000,57],[1553102400000,56],[1553102700000,50],[1553103000000,36],[1553103300000,37],[1553103600000,36],[1553103900000,41],[1553104200000,39],[1553104500000,39],[1553104800000,58],[1553105100000,63],[1553105400000,60],[1553105700000,30],[1553106000000,50],[1553106300000,9],[1553106600000,12],[1553106900000,23],[1553107200000,21],[1553107500000,23],[1553107800000,47],[1553108100000,18],[1553108400000,31],[1553108700000,7],[1553109000000,16],[1553109300000,16],[1553109600000,44],[1553109900000,30],[1553110200000,39],[1553110500000,19],[1553110800000,16],[1553111100000,8],[1553111400000,38],[1553111700000,25],[1553112000000,26],[1553112300000,27],[1553112600000,12],[1553112900000,7],[1553113200000,56],[1553113500000,20],[1553113800000,5],[1553114100000,6],[1553114400000,29],[1553114700000,14],[1553115000000,23],[1553115300000,14],[1553115600000,38],[1553115900000,16],[1553116200000,17],[1553116500000,56],[1553116800000,35],[1553117100000,19],[1553117400000,5],[1553117700000,20],[1553118000000,37],[1553118300000,8],[1553118600000,21],[1553118900000,26],[1553119200000,8],[1553119500000,9],[1553119800000,25],[1553120100000,5],[1553120400000,2],[1553120700000,14],[1553121000000,25],[1553121300000,18],[1553121600000,1],[1553121900000,1],[1553122200000,12],[1553122500000,0],[1553122800000,9],[1553123100000,3],[1553123400000,5],[1553123700000,1],[1553124000000,11],[1553124300000,4],[1553124600000,1],[1553124900000,3],[1553125200000,10],[1553125500000,1],[1553125800000,3],[1553126100000,5],[1553126400000,24],[1553126700000,0],[1553127000000,2],[1553127300000,31],[1553127600000,11],[1553127900000,16],[1553128200000,10],[1553128500000,30],[1553128800000,10],[1553129100000,16],[1553129400000,6],[1553129700000,10],[1553130000000,5],[1553130300000,20],[1553130600000,13],[1553130900000,12],[1553131200000,1],[1553131500000,7],[1553131800000,9],[1553132100000,12],[1553132400000,1],[1553132700000,1],[1553133000000,4],[1553133300000,16],[1553133600000,4],[1553133900000,28],[1553134200000,13],[1553134500000,0],[1553134800000,1],[1553135100000,9],[1553135400000,12],[1553135700000,11],[1553136000000,2],[1553136300000,16],[1553136600000,20],[1553136900000,4],[1553137200000,42],[1553137500000,24],[1553137800000,52],[1553138100000,33],[1553138400000,15],[1553138700000,13],[1553139000000,38],[1553139300000,19],[1553139600000,53],[1553139900000,40],[1553140200000,34],[1553140500000,22],[1553140800000,27],[1553141100000,14],[1553141400000,19],[1553141700000,4],[1553142000000,24],[1553142300000,16],[1553142600000,8],[1553142900000,19],[1553143200000,38],[1553143500000,15],[1553143800000,18],[1553144100000,17],[1553144400000,8],[1553144700000,15],[1553145000000,24],[1553145300000,5],[1553145600000,3],[1553145900000,4],[1553146200000,12],[1553146500000,7],[1553146800000,4],[1553147100000,0],[1553147400000,39],[1553147700000,22],[1553148000000,74],[1553148300000,8],[1553148600000,5],[1553148900000,2],[1553149200000,2],[1553149500000,19],[1553149800000,13],[1553150100000,22],[1553150400000,7],[1553150700000,1],[1553151000000,8],[1553151300000,6],[1553151600000,1],[1553151900000,3],[1553152200000,17],[1553152500000,36],[1553152800000,6],[1553153100000,8],[1553153400000,10],[1553153700000,33],[1553154000000,41],[1553154300000,23],[1553154600000,9],[1553154900000,20],[1553155200000,7],[1553155500000,14],[1553155800000,28],[1553156100000,44],[1553156400000,13],[1553156700000,35],[1553157000000,44],[1553157300000,18],[1553157600000,19],[1553157900000,88],[1553158200000,18],[1553158500000,5],[1553158800000,12],[1553159100000,4],[1553159400000,48],[1553159700000,27],[1553160000000,27],[1553160300000,38],[1553160600000,44],[1553160900000,43],[1553161200000,10],[1553161500000,31],[1553161800000,59],[1553162100000,48],[1553162400000,61],[1553162700000,43],[1553163000000,27],[1553163300000,56],[1553163600000,48],[1553163900000,59],[1553164200000,95],[1553164500000,37],[1553164800000,25],[1553165100000,79],[1553165400000,53],[1553165700000,38],[1553166000000,36],[1553166300000,33],[1553166600000,15],[1553166900000,26],[1553167200000,67],[1553167500000,30],[1553167800000,36],[1553168100000,27],[1553168400000,28],[1553168700000,31],[1553169000000,38],[1553169300000,38],[1553169600000,22],[1553169900000,75],[1553170200000,58],[1553170500000,17],[1553170800000,45],[1553171100000,33],[1553171400000,31],[1553171700000,35],[1553172000000,74],[1553172300000,64],[1553172600000,49],[1553172900000,63],[1553173200000,46],[1553173500000,82],[1553173800000,81],[1553174100000,43],[1553174400000,67],[1553174700000,64],[1553175000000,38],[1553175300000,36],[1553175600000,29],[1553175900000,45],[1553176200000,62],[1553176500000,42],[1553176800000,65],[1553177100000,34],[1553177400000,70],[1553177700000,33],[1553178000000,123],[1553178300000,71],[1553178600000,73],[1553178900000,70],[1553179200000,78],[1553179500000,140],[1553179800000,81],[1553180100000,181],[1553180400000,81],[1553180700000,91],[1553181000000,121],[1553181300000,91],[1553181600000,95],[1553181900000,108],[1553182200000,87],[1553182500000,89],[1553182800000,108],[1553183100000,42],[1553183400000,44],[1553183700000,89],[1553184000000,65],[1553184300000,146],[1553184600000,146],[1553184900000,119],[1553185200000,110],[1553185500000,54],[1553185800000,62],[1553186100000,33],[1553186400000,40],[1553186700000,63],[1553187000000,47],[1553187300000,58],[1553187600000,88],[1553187900000,47],[1553188200000,18],[1553188500000,15],[1553188800000,26],[1553189100000,48],[1553189400000,40],[1553189700000,47],[1553190000000,36],[1553190300000,96],[1553190600000,34],[1553190900000,36],[1553191200000,47],[1553191500000,60],[1553191800000,33],[1553192100000,79],[1553192400000,48],[1553192700000,25],[1553193000000,19],[1553193300000,75],[1553193600000,95],[1553193900000,47],[1553194200000,19],[1553194500000,20],[1553194800000,27],[1553195100000,25],[1553195400000,66],[1553195700000,47],[1553196000000,42],[1553196300000,20],[1553196600000,57],[1553196900000,13],[1553197200000,31],[1553197500000,111],[1553197800000,113],[1553198100000,65],[1553198400000,18],[1553198700000,65],[1553199000000,62],[1553199300000,26],[1553199600000,48],[1553199900000,94],[1553200200000,54],[1553200500000,48],[1553200800000,42],[1553201100000,53],[1553201400000,64],[1553201700000,17],[1553202000000,17],[1553202300000,29],[1553202600000,31],[1553202900000,29],[1553203200000,42],[1553203500000,47],[1553203800000,16],[1553204100000,27],[1553204400000,13],[1553204700000,28],[1553205000000,14],[1553205300000,13],[1553205600000,60],[1553205900000,2],[1553206200000,13],[1553206500000,13],[1553206800000,30],[1553207100000,5],[1553207400000,8],[1553207700000,16],[1553208000000,9],[1553208300000,21],[1553208600000,3],[1553208900000,29],[1553209200000,30],[1553209500000,3],[1553209800000,45],[1553210100000,21],[1553210400000,6],[1553210700000,10],[1553211000000,34],[1553211300000,39],[1553211600000,37],[1553211900000,12],[1553212200000,36],[1553212500000,31],[1553212800000,73],[1553213100000,37],[1553213400000,11],[1553213700000,12],[1553214000000,4],[1553214300000,7],[1553214600000,1],[1553214900000,0],[1553215200000,10],[1553215500000,13],[1553215800000,14],[1553216100000,18],[1553216400000,15],[1553216700000,4],[1553217000000,11],[1553217300000,24],[1553217600000,7],[1553217900000,11],[1553218200000,16],[1553218500000,14],[1553218800000,9],[1553219100000,16],[1553219400000,8],[1553219700000,7],[1553220000000,16],[1553220300000,16],[1553220600000,2],[1553220900000,1],[1553221200000,4],[1553221500000,4],[1553221800000,6],[1553222100000,0],[1553222400000,1],[1553222700000,3],[1553223000000,4],[1553223300000,0],[1553223600000,2],[1553223900000,2],[1553224200000,0],[1553224500000,2],[1553224800000,5],[1553225100000,0],[1553225400000,12],[1553225700000,0],[1553226000000,1],[1553226300000,6],[1553226600000,6],[1553226900000,4],[1553227200000,6],[1553227500000,11],[1553227800000,16],[1553228100000,11],[1553228400000,2],[1553228700000,8],[1553229000000,4],[1553229300000,9],[1553229600000,22],[1553229900000,20],[1553230200000,13],[1553230500000,7],[1553230800000,13],[1553231100000,1],[1553231400000,5],[1553231700000,0],[1553232000000,3],[1553232300000,7],[1553232600000,4],[1553232900000,0],[1553233200000,0],[1553233500000,0],[1553233800000,8],[1553234100000,0],[1553234400000,9],[1553234700000,0],[1553235000000,6],[1553235300000,29],[1553235600000,1],[1553235900000,21],[1553236200000,3],[1553236500000,0],[1553236800000,0],[1553237100000,5],[1553237400000,0],[1553237700000,3],[1553238000000,11],[1553238300000,13],[1553238600000,27],[1553238900000,66],[1553239200000,41],[1553239500000,21],[1553239800000,18],[1553240100000,30],[1553240400000,13],[1553240700000,12],[1553241000000,4],[1553241300000,8],[1553241600000,14],[1553241900000,2],[1553242200000,14],[1553242500000,1],[1553242800000,19],[1553243100000,62],[1553243400000,28],[1553243700000,10],[1553244000000,23],[1553244300000,24],[1553244600000,36],[1553244900000,22],[1553245200000,11],[1553245500000,35],[1553245800000,22],[1553246100000,84],[1553246400000,87],[1553246700000,28],[1553247000000,27],[1553247300000,16],[1553247600000,10],[1553247900000,44],[1553248200000,88],[1553248500000,41],[1553248800000,26],[1553249100000,8],[1553249400000,26],[1553249700000,65],[1553250000000,50],[1553250300000,68],[1553250600000,49],[1553250900000,101],[1553251200000,67],[1553251500000,69],[1553251800000,76],[1553252100000,109],[1553252400000,57],[1553252700000,73],[1553253000000,35],[1553253300000,77],[1553253600000,36],[1553253900000,66],[1553254200000,67],[1553254500000,56],[1553254800000,78],[1553255100000,116],[1553255400000,74],[1553255700000,89],[1553256000000,36],[1553256300000,68],[1553256600000,70],[1553256900000,73],[1553257200000,26],[1553257500000,70],[1553257800000,14],[1553258100000,31],[1553258400000,50],[1553258700000,26],[1553259000000,10],[1553259300000,14],[1553259600000,41],[1553259900000,17],[1553260200000,27],[1553260500000,12],[1553260800000,49],[1553261100000,74],[1553261400000,42],[1553261700000,56],[1553262000000,28],[1553262300000,47],[1553262600000,111],[1553262900000,58],[1553263200000,70],[1553263500000,53],[1553263800000,61],[1553264100000,53],[1553264400000,39],[1553264700000,91],[1553265000000,29],[1553265300000,32],[1553265600000,42],[1553265900000,62],[1553266200000,18],[1553266500000,19],[1553266800000,21],[1553267100000,53],[1553267400000,21],[1553267700000,27],[1553268000000,108],[1553268300000,96],[1553268600000,61],[1553268900000,77],[1553269200000,30],[1553269500000,29],[1553269800000,78],[1553270100000,30],[1553270400000,53],[1553270700000,33],[1553271000000,33],[1553271300000,132],[1553271600000,74],[1553271900000,39],[1553272200000,62],[1553272500000,90],[1553272800000,44],[1553273100000,35],[1553273400000,60],[1553273700000,34],[1553274000000,66],[1553274300000,68],[1553274600000,17],[1553274900000,60],[1553275200000,53],[1553275500000,50],[1553275800000,58],[1553276100000,18],[1553276400000,62],[1553276700000,36],[1553277000000,35],[1553277300000,111],[1553277600000,31],[1553277900000,53],[1553278200000,68],[1553278500000,68],[1553278800000,90],[1553279100000,51],[1553279400000,38],[1553279700000,20],[1553280000000,17],[1553280300000,9],[1553280600000,43],[1553280900000,43],[1553281200000,19],[1553281500000,24],[1553281800000,61],[1553282100000,37],[1553282400000,72],[1553282700000,28],[1553283000000,30],[1553283300000,39],[1553283600000,51],[1553283900000,56],[1553284200000,51],[1553284500000,36],[1553284800000,22],[1553285100000,48],[1553285400000,20],[1553285700000,48],[1553286000000,32],[1553286300000,21],[1553286600000,36],[1553286900000,4],[1553287200000,9],[1553287500000,15],[1553287800000,22],[1553288100000,31],[1553288400000,33],[1553288700000,9],[1553289000000,6],[1553289300000,21],[1553289600000,22],[1553289900000,5],[1553290200000,3],[1553290500000,1],[1553290800000,7],[1553291100000,0],[1553291400000,0],[1553291700000,3],[1553292000000,0],[1553292300000,0],[1553292600000,0],[1553292900000,7],[1553293200000,1],[1553293500000,1],[1553293800000,0],[1553294100000,1],[1553294400000,44],[1553294700000,10],[1553295000000,27],[1553295300000,15],[1553295600000,15],[1553295900000,13],[1553296200000,5],[1553296500000,2],[1553296800000,0],[1553297100000,1],[1553297400000,2],[1553297700000,3],[1553298000000,19],[1553298300000,4],[1553298600000,0],[1553298900000,3],[1553299200000,29],[1553299500000,17],[1553299800000,2],[1553300100000,2],[1553300400000,2],[1553300700000,18],[1553301000000,0],[1553301300000,6],[1553301600000,3],[1553301900000,8],[1553302200000,3],[1553302500000,2],[1553302800000,11],[1553303100000,0],[1553303400000,0],[1553303700000,4],[1553304000000,8],[1553304300000,16],[1553304600000,1],[1553304900000,1],[1553305200000,1],[1553305500000,0],[1553305800000,6],[1553306100000,11],[1553306400000,3],[1553306700000,5],[1553307000000,0],[1553307300000,1],[1553307600000,0],[1553307900000,3],[1553308200000,6],[1553308500000,0],[1553308800000,0],[1553309100000,0],[1553309400000,0],[1553309700000,2],[1553310000000,0],[1553310300000,0],[1553310600000,0],[1553310900000,0],[1553311200000,1],[1553311500000,0],[1553311800000,0],[1553312100000,10],[1553312400000,5],[1553312700000,1],[1553313000000,0],[1553313300000,0],[1553313600000,0],[1553313900000,0],[1553314200000,1],[1553314500000,2],[1553314800000,0],[1553315100000,1],[1553315400000,0],[1553315700000,0],[1553316000000,8],[1553316300000,1],[1553316600000,2],[1553316900000,1],[1553317200000,15],[1553317500000,7],[1553317800000,1],[1553318100000,4],[1553318400000,5],[1553318700000,5],[1553319000000,7],[1553319300000,9],[1553319600000,10],[1553319900000,0],[1553320200000,19],[1553320500000,7],[1553320800000,0],[1553321100000,9],[1553321400000,0],[1553321700000,0],[1553322000000,0],[1553322300000,0],[1553322600000,6],[1553322900000,0],[1553323200000,0],[1553323500000,1],[1553323800000,0],[1553324100000,0],[1553324400000,3],[1553324700000,0],[1553325000000,0],[1553325300000,0],[1553325600000,1],[1553325900000,0],[1553326200000,1],[1553326500000,0],[1553326800000,0],[1553327100000,9],[1553327400000,4],[1553327700000,6],[1553328000000,15],[1553328300000,12],[1553328600000,12],[1553328900000,3],[1553329200000,3],[1553329500000,1],[1553329800000,12],[1553330100000,4],[1553330400000,0],[1553330700000,0],[1553331000000,2],[1553331300000,0],[1553331600000,0],[1553331900000,3],[1553332200000,13],[1553332500000,38],[1553332800000,35],[1553333100000,2],[1553333400000,5],[1553333700000,1],[1553334000000,3],[1553334300000,5],[1553334600000,0],[1553334900000,2],[1553335200000,0],[1553335500000,0],[1553335800000,3],[1553336100000,6],[1553336400000,4],[1553336700000,1],[1553337000000,4],[1553337300000,0],[1553337600000,7],[1553337900000,3],[1553338200000,0],[1553338500000,0],[1553338800000,2],[1553339100000,0],[1553339400000,0],[1553339700000,2],[1553340000000,0],[1553340300000,0],[1553340600000,3],[1553340900000,0],[1553341200000,0],[1553341500000,1],[1553341800000,0],[1553342100000,0],[1553342400000,1],[1553342700000,1],[1553343000000,0],[1553343300000,0],[1553343600000,2],[1553343900000,6],[1553344200000,3],[1553344500000,0],[1553344800000,0],[1553345100000,0],[1553345400000,1],[1553345700000,1],[1553346000000,1],[1553346300000,1],[1553346600000,0],[1553346900000,0],[1553347200000,1],[1553347500000,2],[1553347800000,2],[1553348100000,2],[1553348400000,4],[1553348700000,0],[1553349000000,0],[1553349300000,1],[1553349600000,2],[1553349900000,9],[1553350200000,3],[1553350500000,8],[1553350800000,3],[1553351100000,1],[1553351400000,4],[1553351700000,4],[1553352000000,10],[1553352300000,5],[1553352600000,3],[1553352900000,4],[1553353200000,9],[1553353500000,1],[1553353800000,8],[1553354100000,2],[1553354400000,4],[1553354700000,1],[1553355000000,4],[1553355300000,2],[1553355600000,9],[1553355900000,7],[1553356200000,12],[1553356500000,3],[1553356800000,6],[1553357100000,24],[1553357400000,6],[1553357700000,3],[1553358000000,11],[1553358300000,66],[1553358600000,6],[1553358900000,0],[1553359200000,8],[1553359500000,6],[1553359800000,13],[1553360100000,7],[1553360400000,4],[1553360700000,1],[1553361000000,2],[1553361300000,0],[1553361600000,3],[1553361900000,14],[1553362200000,1],[1553362500000,11],[1553362800000,1],[1553363100000,1],[1553363400000,0],[1553363700000,0],[1553364000000,1],[1553364300000,3],[1553364600000,0],[1553364900000,1],[1553365200000,0],[1553365500000,0],[1553365800000,6],[1553366100000,6],[1553366400000,0],[1553366700000,0],[1553367000000,1],[1553367300000,0],[1553367600000,0],[1553367900000,14],[1553368200000,0],[1553368500000,0],[1553368800000,0],[1553369100000,1],[1553369400000,0],[1553369700000,0],[1553370000000,0],[1553370300000,0],[1553370600000,1],[1553370900000,2],[1553371200000,2],[1553371500000,0],[1553371800000,0],[1553372100000,0],[1553372400000,4],[1553372700000,9],[1553373000000,0],[1553373300000,0],[1553373600000,0],[1553373900000,0],[1553374200000,3],[1553374500000,1],[1553374800000,0],[1553375100000,6],[1553375400000,4],[1553375700000,2],[1553376000000,2],[1553376300000,0],[1553376600000,2],[1553376900000,4],[1553377200000,0],[1553377500000,4],[1553377800000,4],[1553378100000,1],[1553378400000,3],[1553378700000,12],[1553379000000,8],[1553379300000,3],[1553379600000,2],[1553379900000,10],[1553380200000,1],[1553380500000,1],[1553380800000,13],[1553381100000,22],[1553381400000,33],[1553381700000,31],[1553382000000,37],[1553382300000,40],[1553382600000,5],[1553382900000,24],[1553383200000,34],[1553383500000,34],[1553383800000,19],[1553384100000,18],[1553384400000,0],[1553384700000,0],[1553385000000,14],[1553385300000,8],[1553385600000,20],[1553385900000,56],[1553386200000,34],[1553386500000,20],[1553386800000,2],[1553387100000,0],[1553387400000,3],[1553387700000,11],[1553388000000,2],[1553388300000,7],[1553388600000,5],[1553388900000,3],[1553389200000,2],[1553389500000,0],[1553389800000,1],[1553390100000,11],[1553390400000,4],[1553390700000,0],[1553391000000,1],[1553391300000,3],[1553391600000,14],[1553391900000,1],[1553392200000,17],[1553392500000,9],[1553392800000,0],[1553393100000,0],[1553393400000,0],[1553393700000,0],[1553394000000,5],[1553394300000,0],[1553394600000,1],[1553394900000,1],[1553395200000,2],[1553395500000,0],[1553395800000,0],[1553396100000,2],[1553396400000,0],[1553396700000,0],[1553397000000,12],[1553397300000,0],[1553397600000,2],[1553397900000,3],[1553398200000,1],[1553398500000,0],[1553398800000,10],[1553399100000,4],[1553399400000,3],[1553399700000,4],[1553400000000,4],[1553400300000,0],[1553400600000,4],[1553400900000,2],[1553401200000,1],[1553401500000,10],[1553401800000,8],[1553402100000,5],[1553402400000,9],[1553402700000,9],[1553403000000,0],[1553403300000,0],[1553403600000,0],[1553403900000,0],[1553404200000,0],[1553404500000,4],[1553404800000,1],[1553405100000,0],[1553405400000,0],[1553405700000,0],[1553406000000,17],[1553406300000,0],[1553406600000,0],[1553406900000,0],[1553407200000,0],[1553407500000,0],[1553407800000,2],[1553408100000,0],[1553408400000,0],[1553408700000,0],[1553409000000,4],[1553409300000,0],[1553409600000,1],[1553409900000,1],[1553410200000,0],[1553410500000,1],[1553410800000,1],[1553411100000,0],[1553411400000,2],[1553411700000,13],[1553412000000,2],[1553412300000,8],[1553412600000,4],[1553412900000,0],[1553413200000,0],[1553413500000,0],[1553413800000,0],[1553414100000,0],[1553414400000,0],[1553414700000,0],[1553415000000,0],[1553415300000,0],[1553415600000,0],[1553415900000,4],[1553416200000,3],[1553416500000,0],[1553416800000,0],[1553417100000,7],[1553417400000,2],[1553417700000,5],[1553418000000,21],[1553418300000,0],[1553418600000,16],[1553418900000,1],[1553419200000,7],[1553419500000,0],[1553419800000,5],[1553420100000,0],[1553420400000,5],[1553420700000,5],[1553421000000,2],[1553421300000,0],[1553421600000,0],[1553421900000,3],[1553422200000,0],[1553422500000,0],[1553422800000,0],[1553423100000,0],[1553423400000,0],[1553423700000,0],[1553424000000,0],[1553424300000,0],[1553424600000,0],[1553424900000,3],[1553425200000,1],[1553425500000,2],[1553425800000,0],[1553426100000,0],[1553426400000,0],[1553426700000,2],[1553427000000,6],[1553427300000,3],[1553427600000,0],[1553427900000,0],[1553428200000,0],[1553428500000,2],[1553428800000,2],[1553429100000,0],[1553429400000,5],[1553429700000,1],[1553430000000,12],[1553430300000,4],[1553430600000,3],[1553430900000,18],[1553431200000,0],[1553431500000,2],[1553431800000,0],[1553432100000,3],[1553432400000,0],[1553432700000,2],[1553433000000,0],[1553433300000,0],[1553433600000,2],[1553433900000,0],[1553434200000,3],[1553434500000,0],[1553434800000,0],[1553435100000,3],[1553435400000,0],[1553435700000,0],[1553436000000,0],[1553436300000,0],[1553436600000,0],[1553436900000,0],[1553437200000,0],[1553437500000,0],[1553437800000,2],[1553438100000,3],[1553438400000,3],[1553438700000,0],[1553439000000,0],[1553439300000,0],[1553439600000,0],[1553439900000,0],[1553440200000,0],[1553440500000,0],[1553440800000,0],[1553441100000,2],[1553441400000,0],[1553441700000,1],[1553442000000,5],[1553442300000,8],[1553442600000,2],[1553442900000,3],[1553443200000,6],[1553443500000,29],[1553443800000,9],[1553444100000,8],[1553444400000,7],[1553444700000,2],[1553445000000,3],[1553445300000,4],[1553445600000,4],[1553445900000,0],[1553446200000,0],[1553446500000,10],[1553446800000,6],[1553447100000,0],[1553447400000,11],[1553447700000,2],[1553448000000,6],[1553448300000,7],[1553448600000,9],[1553448900000,2],[1553449200000,20],[1553449500000,0],[1553449800000,6],[1553450100000,51],[1553450400000,5],[1553450700000,4],[1553451000000,3],[1553451300000,0],[1553451600000,0],[1553451900000,1],[1553452200000,2],[1553452500000,0],[1553452800000,2],[1553453100000,2],[1553453400000,18],[1553453700000,15],[1553454000000,26],[1553454300000,35],[1553454600000,19],[1553454900000,0],[1553455200000,0],[1553455500000,4],[1553455800000,0],[1553456100000,0],[1553456400000,0],[1553456700000,0],[1553457000000,2],[1553457300000,0],[1553457600000,0],[1553457900000,2],[1553458200000,8],[1553458500000,1],[1553458800000,12],[1553459100000,22],[1553459400000,4],[1553459700000,1],[1553460000000,1],[1553460300000,4],[1553460600000,2],[1553460900000,3],[1553461200000,7],[1553461500000,4],[1553461800000,1],[1553462100000,4],[1553462400000,0],[1553462700000,0],[1553463000000,4],[1553463300000,7],[1553463600000,10],[1553463900000,3],[1553464200000,1],[1553464500000,4],[1553464800000,1],[1553465100000,6],[1553465400000,2],[1553465700000,5],[1553466000000,0],[1553466300000,13],[1553466600000,5],[1553466900000,0],[1553467200000,5],[1553467500000,36],[1553467800000,9],[1553468100000,4],[1553468400000,40],[1553468700000,0],[1553469000000,0],[1553469300000,1],[1553469600000,2],[1553469900000,3],[1553470200000,10],[1553470500000,16],[1553470800000,8],[1553471100000,7],[1553471400000,30],[1553471700000,6],[1553472000000,0]]

  $('<h2>User elasticservice API-calls <small class="text-muted">(average: 5 req/min, median: 3 req/min)</small></h2>').appendTo($('#playground'))
  drawDateTimeSeries(rawApiUsage, 'API calls / 5min');

  const rawWeekendUsage = [[1553299200000,29],[1553299500000,17],[1553299800000,2],[1553300100000,2],[1553300400000,2],[1553300700000,18],[1553301000000,0],[1553301300000,6],[1553301600000,3],[1553301900000,8],[1553302200000,3],[1553302500000,2],[1553302800000,11],[1553303100000,0],[1553303400000,0],[1553303700000,4],[1553304000000,8],[1553304300000,16],[1553304600000,1],[1553304900000,1],[1553305200000,1],[1553305500000,0],[1553305800000,6],[1553306100000,11],[1553306400000,3],[1553306700000,5],[1553307000000,0],[1553307300000,1],[1553307600000,0],[1553307900000,3],[1553308200000,6],[1553308500000,0],[1553308800000,0],[1553309100000,0],[1553309400000,0],[1553309700000,2],[1553310000000,0],[1553310300000,0],[1553310600000,0],[1553310900000,0],[1553311200000,1],[1553311500000,0],[1553311800000,0],[1553312100000,10],[1553312400000,5],[1553312700000,1],[1553313000000,0],[1553313300000,0],[1553313600000,0],[1553313900000,0],[1553314200000,1],[1553314500000,2],[1553314800000,0],[1553315100000,1],[1553315400000,0],[1553315700000,0],[1553316000000,8],[1553316300000,1],[1553316600000,2],[1553316900000,1],[1553317200000,15],[1553317500000,7],[1553317800000,1],[1553318100000,4],[1553318400000,5],[1553318700000,5],[1553319000000,7],[1553319300000,9],[1553319600000,10],[1553319900000,0],[1553320200000,19],[1553320500000,7],[1553320800000,0],[1553321100000,9],[1553321400000,0],[1553321700000,0],[1553322000000,0],[1553322300000,0],[1553322600000,6],[1553322900000,0],[1553323200000,0],[1553323500000,1],[1553323800000,0],[1553324100000,0],[1553324400000,3],[1553324700000,0],[1553325000000,0],[1553325300000,0],[1553325600000,1],[1553325900000,0],[1553326200000,1],[1553326500000,0],[1553326800000,0],[1553327100000,9],[1553327400000,4],[1553327700000,6],[1553328000000,15],[1553328300000,12],[1553328600000,12],[1553328900000,3],[1553329200000,3],[1553329500000,1],[1553329800000,12],[1553330100000,4],[1553330400000,0],[1553330700000,0],[1553331000000,2],[1553331300000,0],[1553331600000,0],[1553331900000,3],[1553332200000,13],[1553332500000,38],[1553332800000,35],[1553333100000,2],[1553333400000,5],[1553333700000,1],[1553334000000,3],[1553334300000,5],[1553334600000,0],[1553334900000,2],[1553335200000,0],[1553335500000,0],[1553335800000,3],[1553336100000,6],[1553336400000,4],[1553336700000,1],[1553337000000,4],[1553337300000,0],[1553337600000,7],[1553337900000,3],[1553338200000,0],[1553338500000,0],[1553338800000,2],[1553339100000,0],[1553339400000,0],[1553339700000,2],[1553340000000,0],[1553340300000,0],[1553340600000,3],[1553340900000,0],[1553341200000,0],[1553341500000,1],[1553341800000,0],[1553342100000,0],[1553342400000,1],[1553342700000,1],[1553343000000,0],[1553343300000,0],[1553343600000,2],[1553343900000,6],[1553344200000,3],[1553344500000,0],[1553344800000,0],[1553345100000,0],[1553345400000,1],[1553345700000,1],[1553346000000,1],[1553346300000,1],[1553346600000,0],[1553346900000,0],[1553347200000,1],[1553347500000,2],[1553347800000,2],[1553348100000,2],[1553348400000,4],[1553348700000,0],[1553349000000,0],[1553349300000,1],[1553349600000,2],[1553349900000,9],[1553350200000,3],[1553350500000,8],[1553350800000,3],[1553351100000,1],[1553351400000,4],[1553351700000,4],[1553352000000,10],[1553352300000,5],[1553352600000,3],[1553352900000,4],[1553353200000,9],[1553353500000,1],[1553353800000,8],[1553354100000,2],[1553354400000,4],[1553354700000,1],[1553355000000,4],[1553355300000,2],[1553355600000,9],[1553355900000,7],[1553356200000,12],[1553356500000,3],[1553356800000,6],[1553357100000,24],[1553357400000,6],[1553357700000,3],[1553358000000,11],[1553358300000,66],[1553358600000,6],[1553358900000,0],[1553359200000,8],[1553359500000,6],[1553359800000,13],[1553360100000,7],[1553360400000,4],[1553360700000,1],[1553361000000,2],[1553361300000,0],[1553361600000,3],[1553361900000,14],[1553362200000,1],[1553362500000,11],[1553362800000,1],[1553363100000,1],[1553363400000,0],[1553363700000,0],[1553364000000,1],[1553364300000,3],[1553364600000,0],[1553364900000,1],[1553365200000,0],[1553365500000,0],[1553365800000,6],[1553366100000,6],[1553366400000,0],[1553366700000,0],[1553367000000,1],[1553367300000,0],[1553367600000,0],[1553367900000,14],[1553368200000,0],[1553368500000,0],[1553368800000,0],[1553369100000,1],[1553369400000,0],[1553369700000,0],[1553370000000,0],[1553370300000,0],[1553370600000,1],[1553370900000,2],[1553371200000,2],[1553371500000,0],[1553371800000,0],[1553372100000,0],[1553372400000,4],[1553372700000,9],[1553373000000,0],[1553373300000,0],[1553373600000,0],[1553373900000,0],[1553374200000,3],[1553374500000,1],[1553374800000,0],[1553375100000,6],[1553375400000,4],[1553375700000,2],[1553376000000,2],[1553376300000,0],[1553376600000,2],[1553376900000,4],[1553377200000,0],[1553377500000,4],[1553377800000,4],[1553378100000,1],[1553378400000,3],[1553378700000,12],[1553379000000,8],[1553379300000,3],[1553379600000,2],[1553379900000,10],[1553380200000,1],[1553380500000,1],[1553380800000,13],[1553381100000,22],[1553381400000,33],[1553381700000,31],[1553382000000,37],[1553382300000,40],[1553382600000,5],[1553382900000,24],[1553383200000,34],[1553383500000,34],[1553383800000,19],[1553384100000,18],[1553384400000,0],[1553384700000,0],[1553385000000,14],[1553385300000,8],[1553385600000,20],[1553385900000,56],[1553386200000,34],[1553386500000,20],[1553386800000,2],[1553387100000,0],[1553387400000,3],[1553387700000,11],[1553388000000,2],[1553388300000,7],[1553388600000,5],[1553388900000,3],[1553389200000,2],[1553389500000,0],[1553389800000,1],[1553390100000,11],[1553390400000,4],[1553390700000,0],[1553391000000,1],[1553391300000,3],[1553391600000,14],[1553391900000,1],[1553392200000,17],[1553392500000,9],[1553392800000,0],[1553393100000,0],[1553393400000,0],[1553393700000,0],[1553394000000,5],[1553394300000,0],[1553394600000,1],[1553394900000,1],[1553395200000,2],[1553395500000,0],[1553395800000,0],[1553396100000,2],[1553396400000,0],[1553396700000,0],[1553397000000,12],[1553397300000,0],[1553397600000,2],[1553397900000,3],[1553398200000,1],[1553398500000,0],[1553398800000,10],[1553399100000,4],[1553399400000,3],[1553399700000,4],[1553400000000,4],[1553400300000,0],[1553400600000,4],[1553400900000,2],[1553401200000,1],[1553401500000,10],[1553401800000,8],[1553402100000,5],[1553402400000,9],[1553402700000,9],[1553403000000,0],[1553403300000,0],[1553403600000,0],[1553403900000,0],[1553404200000,0],[1553404500000,4],[1553404800000,1],[1553405100000,0],[1553405400000,0],[1553405700000,0],[1553406000000,17],[1553406300000,0],[1553406600000,0],[1553406900000,0],[1553407200000,0],[1553407500000,0],[1553407800000,2],[1553408100000,0],[1553408400000,0],[1553408700000,0],[1553409000000,4],[1553409300000,0],[1553409600000,1],[1553409900000,1],[1553410200000,0],[1553410500000,1],[1553410800000,1],[1553411100000,0],[1553411400000,2],[1553411700000,13],[1553412000000,2],[1553412300000,8],[1553412600000,4],[1553412900000,0],[1553413200000,0],[1553413500000,0],[1553413800000,0],[1553414100000,0],[1553414400000,0],[1553414700000,0],[1553415000000,0],[1553415300000,0],[1553415600000,0],[1553415900000,4],[1553416200000,3],[1553416500000,0],[1553416800000,0],[1553417100000,7],[1553417400000,2],[1553417700000,5],[1553418000000,21],[1553418300000,0],[1553418600000,16],[1553418900000,1],[1553419200000,7],[1553419500000,0],[1553419800000,5],[1553420100000,0],[1553420400000,5],[1553420700000,5],[1553421000000,2],[1553421300000,0],[1553421600000,0],[1553421900000,3],[1553422200000,0],[1553422500000,0],[1553422800000,0],[1553423100000,0],[1553423400000,0],[1553423700000,0],[1553424000000,0],[1553424300000,0],[1553424600000,0],[1553424900000,3],[1553425200000,1],[1553425500000,2],[1553425800000,0],[1553426100000,0],[1553426400000,0],[1553426700000,2],[1553427000000,6],[1553427300000,3],[1553427600000,0],[1553427900000,0],[1553428200000,0],[1553428500000,2],[1553428800000,2],[1553429100000,0],[1553429400000,5],[1553429700000,1],[1553430000000,12],[1553430300000,4],[1553430600000,3],[1553430900000,18],[1553431200000,0],[1553431500000,2],[1553431800000,0],[1553432100000,3],[1553432400000,0],[1553432700000,2],[1553433000000,0],[1553433300000,0],[1553433600000,2],[1553433900000,0],[1553434200000,3],[1553434500000,0],[1553434800000,0],[1553435100000,3],[1553435400000,0],[1553435700000,0],[1553436000000,0],[1553436300000,0],[1553436600000,0],[1553436900000,0],[1553437200000,0],[1553437500000,0],[1553437800000,2],[1553438100000,3],[1553438400000,3],[1553438700000,0],[1553439000000,0],[1553439300000,0],[1553439600000,0],[1553439900000,0],[1553440200000,0],[1553440500000,0],[1553440800000,0],[1553441100000,2],[1553441400000,0],[1553441700000,1],[1553442000000,5],[1553442300000,8],[1553442600000,2],[1553442900000,3],[1553443200000,6],[1553443500000,29],[1553443800000,9],[1553444100000,8],[1553444400000,7],[1553444700000,2],[1553445000000,3],[1553445300000,4],[1553445600000,4],[1553445900000,0],[1553446200000,0],[1553446500000,10],[1553446800000,6],[1553447100000,0],[1553447400000,11],[1553447700000,2],[1553448000000,6],[1553448300000,7],[1553448600000,9],[1553448900000,2],[1553449200000,20],[1553449500000,0],[1553449800000,6],[1553450100000,51],[1553450400000,5],[1553450700000,4],[1553451000000,3],[1553451300000,0],[1553451600000,0],[1553451900000,1],[1553452200000,2],[1553452500000,0],[1553452800000,2],[1553453100000,2],[1553453400000,18],[1553453700000,15],[1553454000000,26],[1553454300000,35],[1553454600000,19],[1553454900000,0],[1553455200000,0],[1553455500000,4],[1553455800000,0],[1553456100000,0],[1553456400000,0],[1553456700000,0],[1553457000000,2],[1553457300000,0],[1553457600000,0],[1553457900000,2],[1553458200000,8],[1553458500000,1],[1553458800000,12],[1553459100000,22],[1553459400000,4],[1553459700000,1],[1553460000000,1],[1553460300000,4],[1553460600000,2],[1553460900000,3],[1553461200000,7],[1553461500000,4],[1553461800000,1],[1553462100000,4],[1553462400000,0],[1553462700000,0],[1553463000000,4],[1553463300000,7],[1553463600000,10],[1553463900000,3],[1553464200000,1],[1553464500000,4],[1553464800000,1],[1553465100000,6],[1553465400000,2],[1553465700000,5],[1553466000000,0],[1553466300000,13],[1553466600000,5],[1553466900000,0],[1553467200000,5],[1553467500000,36],[1553467800000,9],[1553468100000,4],[1553468400000,40],[1553468700000,0],[1553469000000,0],[1553469300000,1],[1553469600000,2],[1553469900000,3],[1553470200000,10],[1553470500000,16],[1553470800000,8],[1553471100000,7],[1553471400000,30],[1553471700000,6],[1553472000000,0]]
  $('<h3>Weekend</h3>').appendTo($('#playground'))
  drawDateTimeSeries(
    //_.map(rawWeekendUsage, ([ time, count ]) => [ new Date(time), count ] ),
    rawWeekendUsage,
    'API calls / 5min'
  );



  drawRetweetDurationChart();

  return;


  $.get(`/dist/resources/4gstatus.json`, { h: pyppe.resourceHash }).then(res => {
    /*
    console.log('abort 4g status');
    return;
    */

    //moment.locale('en');

    const OneMinute = 60000;
    const GapLimit = OneMinute * 60;

    const data = _.chain(res).
      //filter(({time}) => time > Date.UTC(2017,4,1,13) && time < Date.UTC(2017,4,6,12)).
      filter(({ time }) => time > Date.UTC(2017, 5, 1)).
      groupBy('status.Z_CELL_ID').
      toPairs().
      filter(kv => _.size(kv[1]) > 10).
      value();

    const $container = $('#playground-dna');

    $('<div/>').appendTo($container).highcharts({
      chart: {
        zoomType: 'x',
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      title: { text: 'DNA 4G cellular base station speeds (Mbps)' },
      xAxis: { type: 'datetime' },
      yAxis: { title: { text: 'Mbps' } },
      plotOptions: {
        series: {
          turboThreshold: 0,
          lineWidth: 1,
          states: {
            hover: {
              lineWidth: 1
            }
          }
        }
      },
      legend: { title: { text: 'CELL ID' } },
      tooltip: {
        formatter() {
          return `<em>${moment(this.x).format('LLL')}</em><br/><b>${this.y} Mbps</b>`
        }
      },
      series: _.map(data, ([cellId, dataPoints]) => {
        return {
          name: cellId,
          data: _.flatMap(dataPoints, (dp, idx) => {
            const isGap = idx > 0 && ((dp.time - dataPoints[idx - 1].time) > GapLimit);
            return _.compact([
              isGap ? { x: dataPoints[idx - 1].time, y: null } : null,
              { x: dp.time, y: dp.speed }
            ]);
          })
        }
      })
    });

    $('<div/>').appendTo($container).highcharts({
      chart: {
        zoomType: 'x',
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      title: { text: 'DNA 4G cellular base station SINR' },
      xAxis: { type: 'datetime' },
      yAxis: { title: { text: 'dB' } },
      plotOptions: {
        series: {
          turboThreshold: 0,
          lineWidth: 1,
          states: {
            hover: {
              lineWidth: 1
            }
          }
        }
      },
      legend: { title: { text: 'CELL ID' } },
      tooltip: {
        formatter() {
          return `<em>${moment(this.x).format('LLL')}</em><br/><b>${this.y} dB</b>`
        }
      },
      series: _.map(data, ([cellId, dataPoints]) => {
        return {
          name: cellId,
          data: _.flatMap(_.filter(dataPoints, dp => _.has(dp, 'status')), (dp, idx) => {
            const isGap = idx > 0 && ((dp.time - dataPoints[idx - 1].time) > GapLimit);
            return _.compact([
              isGap ? { x: dataPoints[idx - 1].time, y: null } : null,
              { x: dp.time, y: parseFloat(dp.status.lte_snr, 10) }
            ]);
          })
        }
      })
    });

  });

  $.get(`/dist/resources/trademark-playground.json`, { h: pyppe.resourceHash }).then(({ topFilers, byYear, topRegistries }) => {
    drawTopFilers(topFilers);
    drawYearlyGraph(byYear);
    drawTopRegistries(topRegistries);
  });

  function drawTopRegistries(topRegistries) {
    const $container = $('body > .container');
    $('<h4>Most used trademark registries by Finnish companies <small class="text-muted">in past two years</small></h4>').appendTo($container);
    $('<div/>').appendTo($container).highcharts({
      chart: {
        type: 'bar',
        height: 600
      },
      title: null,
      xAxis: {
        categories: _.map(topRegistries, 'name'),
        title: null
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      series: [
        {
          name: 'Year 1800',
          data: _.map(topRegistries, 'doc_count')
        }
      ]
    });
  }

  function drawYearlyGraph(buckets) {
    /*
    const cumulativeData = _.reduce(buckets, (acc, {key, doc_count}) => {
      const count = acc.previousSum + doc_count;
      return {
        previousSum: count,
        buckets: [{x: key, y: count}].concat(acc.buckets)
      }
    }, {previousSum: 0, buckets: []});
    console.log(cumulativeData);
    */

    const $container = $('body > .container');
    $('<h4>Trademark applications by Finnish filers</h4>').appendTo($container);
    $('<div/>').appendTo($container).highcharts({
      chart: {
        zoomType: 'x',
      },
      colors: ['#008833', '#0054bc', '#d84449', '#ffce12', '#0e365a', '#17a794', '#7d57c2', '#605956'],
      credits: false,
      title: null,
      xAxis: { type: 'datetime' },
      yAxis: { title: { text: 'Trademark applications / year' } },
      plotOptions: {
        series: {
          turboThreshold: 0,
          lineWidth: 2,
          marker: {
            radius: 0
          },
          states: {
            hover: {
              lineWidth: 1
            }
          }
        }
      },
      series: [
        {
          name: 'Foo',
          data: _.map(buckets, ({ key, doc_count }) => {
            return {
              x: key,
              y: doc_count
            };
          })
        }
      ]
    });
  }

  function drawTopFilers(topFilers) {
    $('<h4>Biggest Finnish trademark filers <small class="text-muted">in past two years</small></h4>').appendTo($('body > .container'));
    const $container = $('<div/>').appendTo($('body > .container'));

    const words = _.map(topFilers, ({ name, doc_count }) => ({
      text: name,//.replace(/ /gi, '<br/>'),
      score: doc_count
    }));

    const scores = _.map(words, 'score');

    const colorOptions = _.reverse([
      '#0e2e60', '#31558e', '#5990b7', '#8eb3cc'
    ]);
    const color = d3.scaleSqrt().
      domain([_.min(scores), _.max(scores)]).
      range([0, _.size(colorOptions) - 1]);

    const fontSize = d3.scaleSqrt().
      domain([_.min(scores), _.max(scores)]).
      range([10, 30]);

    const [width, height] = (() => {
      //const windowHeight = $(window).height();
      return [$container.width(), 600];
    })();

    d3.layout.cloud().
      size([width, height]).
      words(words).
      padding(1).
      //spiral('archimedean').
      //rotate(function() { return (~~(Math.random() * 6) - 3) * 30; }).
      rotate(0).
      fontSize(({ score }) => fontSize(score)).
      on("end", draw).
      start();

    function draw(words) {
      d3.select($container[0]).
        append("svg").
        attr("width", width + 200).
        attr("height", height).
        attr("class", "wordcloud").
        append("g").
        // without the transform, words would get cutoff to the left and top, they would
        // appear outside of the SVG area
        attr("transform", `translate(${width / 2}, ${height / 2})`).
        selectAll("text").
        data(words).
        enter().append("text").
        style("font-size", ({ score }) => `${fontSize(score)}px`).
        style("fill", ({ score }) => {
          const index = Math.round(color(score));
          console.log('color for score %s is %s', score, index);
          return colorOptions[index];
        }).
        attr("transform", function (d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        }).
        text(function (d) { return d.text; });
    }
  }

})();
